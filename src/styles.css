/* ═══════════════════════════════════════════════════
   TypeForge — styles.css
   Warm dark theme, humanized & modern
═══════════════════════════════════════════════════ */

:root {
  --bg:        #100e18;
  --surface:   #1b1826;
  --surface-2: #252032;
  --surface-3: #2e2840;
  --border:    #342e48;
  --border-2:  #3e3858;
  --text:      #ede8fa;
  --muted:     #7d7699;
  --muted-2:   #534d6e;

  --accent:  #ff8b6e;  /* primary warm accent */
  --teal:    #5ee6c8;  /* success only */
  --amber:   #fbbf24;  /* mid-tension timer */
  --pink:    #f87196;  /* errors / danger */
  --indigo:  #a78bfa;  /* ghost mechanic only */

  --correct: #8de5c0;
  --wrong:   #f87196;
  --cursor:  #ff8b6e;

  --r:    16px;
  --r-sm: 8px;
  --r-xs: 4px;

  --tr-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
  --tr-med:  300ms cubic-bezier(0.4, 0, 0.2, 1);
  --tr-slow: 500ms cubic-bezier(0.4, 0, 0.2, 1);
}

/* ── Reset ── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { font-size: 16px; scroll-behavior: smooth; }

body {
  font-family: 'Outfit', sans-serif;
  background: var(--bg);
  color: var(--text);
  min-height: 100vh;
  -webkit-font-smoothing: antialiased;
  background-image:
    radial-gradient(ellipse 80% 50% at 50% -20%, rgba(167,139,250,0.08), transparent),
    radial-gradient(ellipse 50% 40% at 80% 80%,  rgba(255,139,110,0.05), transparent);
}

button { font-family: 'Outfit', sans-serif; cursor: pointer; border: none; background: none; }
em { font-style: italic; }
h1, h2, h3 { font-weight: 700; }

.app { min-height: 100vh; }

/* ═══════════════════════════════════════════════════
   HOME
═══════════════════════════════════════════════════ */

.home-wrap { max-width: 820px; margin: 0 auto; padding: 0 24px 80px; animation: fadeUp 0.4s cubic-bezier(0.16, 1, 0.3, 1); }
@keyframes fadeUp { from { opacity: 0; transform: translateY(16px); } to { opacity: 1; transform: translateY(0); } }

.home-nav { display: flex; justify-content: space-between; align-items: center; padding: 28px 0 0; margin-bottom: 60px; }
.logo { display: flex; align-items: center; gap: 10px; font-size: 18px; font-weight: 400; color: var(--muted); }
.logo strong { color: var(--text); font-weight: 700; }
.logo-mark { font-size: 20px; background: var(--surface-2); border: 1px solid var(--border); border-radius: 8px; width: 34px; height: 34px; display: grid; place-items: center; }
.nav-right { display: flex; align-items: center; gap: 10px; }

.chip-btn { display: flex; align-items: center; gap: 8px; font-size: 12px; font-weight: 500; letter-spacing: 0.08em; color: var(--muted); background: var(--surface); border: 1px solid var(--border); border-radius: 16px; padding: 8px 16px; transition: color var(--tr-fast), border-color var(--tr-fast), background var(--tr-fast); }
.chip-btn:hover { color: var(--text); border-color: var(--border-2); background: var(--surface-2); }

.sound-bars { display: flex; align-items: center; gap: 2px; height: 12px; }
.sound-bars span { display: block; width: 2px; background: currentColor; border-radius: 2px; animation: sbar 0.9s ease-in-out infinite; }
.sound-bars span:nth-child(1) { height: 4px;  animation-delay: 0s; }
.sound-bars span:nth-child(2) { height: 10px; animation-delay: 0.15s; }
.sound-bars span:nth-child(3) { height: 7px;  animation-delay: 0.3s; }
.sound-bars span:nth-child(4) { height: 5px;  animation-delay: 0.45s; }
@keyframes sbar { 0%,100%{transform:scaleY(0.4)} 50%{transform:scaleY(1)} }
.sound-bars.muted span { animation: none; transform: scaleY(0.3); opacity: 0.3; }

.home-hero { margin-bottom: 52px; }
.hero-eyebrow { font-size: 11px; font-weight: 600; letter-spacing: 0.08em; text-transform: uppercase; color: var(--accent); margin-bottom: 16px; opacity: 0.8; }
.hero-title { font-size: clamp(38px, 7vw, 64px); font-weight: 800; line-height: 1.05; letter-spacing: -1.5px; color: var(--text); margin-bottom: 16px; }
.hero-title em { color: var(--accent); font-style: italic; font-weight: 700; }
.hero-sub { font-size: 16px; color: var(--muted); }

.hero-recap {
  margin-top: 16px;
  padding: 12px 16px;
  border-radius: var(--r-sm);
  background: var(--surface);
  border: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  gap: 4px;
  cursor: pointer;
  transition: border-color var(--tr-fast), background-color var(--tr-fast), transform var(--tr-fast);
}
.hero-recap:hover {
  border-color: var(--border-2);
  background: var(--surface-2);
  transform: translateY(-1px);
}
.hero-recap-label {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--muted-2);
}
.hero-recap-main {
  display: flex;
  align-items: baseline;
  gap: 8px;
}
.hero-recap-wpm {
  font-family: 'JetBrains Mono', monospace;
  font-size: 24px;
  color: var(--accent);
}
.hero-recap-meta {
  font-family: 'JetBrains Mono', monospace;
  font-size: 11px;
  color: var(--muted-2);
}

.game-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 14px; margin-bottom: 48px; }
.game-card { background: var(--surface); border: 1px solid var(--border); border-radius: 22px; padding: 26px 24px; text-align: left; position: relative; overflow: hidden; display: flex; flex-direction: column; gap: 8px; transition: transform 0.28s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.28s ease, border-color 0.22s ease; }
.game-card:hover { transform: translateY(-5px) scale(1.005); box-shadow: 0 24px 60px rgba(0,0,0,0.45), 0 0 0 1px var(--c); border-color: var(--c); }
.game-card:active { transform: translateY(-2px) scale(1.002); }
.card-glow { position: absolute; inset: -1px; background: radial-gradient(ellipse 70% 50% at 30% 0%, var(--c), transparent 65%); opacity: 0; transition: opacity 0.4s; pointer-events: none; }
.game-card:hover .card-glow { opacity: 0.1; }
.card-top { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 6px; }
.card-icon { font-size: 30px; line-height: 1; }
.card-badge { font-size: 10px; font-weight: 600; letter-spacing: 0.08em; text-transform: uppercase; color: var(--c); background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.08); padding: 4px 8px; border-radius: 16px; }
.card-name { font-size: 22px; font-weight: 700; color: var(--text); letter-spacing: -0.3px; }
.card-desc { font-size: 13px; color: var(--muted); line-height: 1.65; flex: 1; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
.card-footer { display: flex; justify-content: space-between; align-items: center; margin-top: 8px; padding-top: 14px; border-top: 1px solid var(--border); }
.card-tag { font-family: 'JetBrains Mono', monospace; font-size: 10px; color: var(--muted-2); }
.card-arrow { font-size: 18px; color: var(--c); opacity: 0; transform: translateX(-8px); transition: opacity 0.22s, transform 0.22s; }
.game-card:hover .card-arrow { opacity: 1; transform: translateX(0); }

.history-panel { background: var(--surface); border: 1px solid var(--border); border-radius: var(--r); overflow: hidden; animation: fadeUp 0.3s ease; max-height: 320px; display: flex; flex-direction: column; margin-top: 24px; }
.panel-header { display: flex; justify-content: space-between; align-items: center; padding: 18px 24px; border-bottom: 1px solid var(--border); }
.section-label { font-size: 11px; font-weight: 600; letter-spacing: 0.08em; text-transform: uppercase; color: var(--muted-2); }
.text-btn { font-size: 12px; font-weight: 500; color: var(--muted); transition: color var(--tr); }
.text-btn:hover { color: var(--text); }
.text-btn.danger:hover { color: var(--wrong); }
.history-empty { padding: 24px; text-align: center; font-size: 13px; color: var(--muted-2); font-family: 'JetBrains Mono', monospace; }
.history-scroll { overflow-x: auto; overflow-y: auto; }
.history-table { width: 100%; border-collapse: collapse; }
.history-table th { font-size: 10px; font-weight: 600; letter-spacing: 0.08em; text-transform: uppercase; color: var(--muted-2); padding: 8px 16px; text-align: left; border-bottom: 1px solid var(--border); }
.history-table td { font-family: 'JetBrains Mono', monospace; font-size: 13px; padding: 12px 20px; border-bottom: 1px solid rgba(255,255,255,0.03); color: var(--text); transition: background var(--tr); }
.history-table tr:last-child td { border-bottom: none; }
.history-table tr:hover td { background: var(--surface-2); }

.wpm-pill { display: inline-block; padding: 2px 9px; border-radius: 12px; font-weight: 600; }
.wpm-god   { background: rgba(255,139,110,0.15); color: var(--accent); }
.wpm-great { background: rgba(94,230,200,0.12);  color: var(--teal); }
.wpm-good  { background: rgba(167,139,250,0.12); color: var(--indigo); }
.wpm-ok    { background: rgba(125,118,153,0.12); color: var(--muted); }

/* ═══════════════════════════════════════════════════
   GAME
═══════════════════════════════════════════════════ */

.game-wrap { max-width: 820px; margin: 0 auto; padding: 0 24px 80px; animation: fadeUp 0.3s cubic-bezier(0.16,1,0.3,1); }
.game-nav { display: flex; align-items: center; gap: 16px; padding: 24px 0 24px; flex-wrap: wrap; }
.back-btn { display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500; color: var(--muted); background: var(--surface); border: 1px solid var(--border); border-radius: var(--r-sm); padding: 8px 16px; transition: color var(--tr-fast), border-color var(--tr-fast), background var(--tr-fast); flex-shrink: 0; }
.back-btn:hover { color: var(--text); border-color: var(--border-2); background: var(--surface-2); }
.game-nav-title { font-size: 13px; font-weight: 600; color: var(--muted-2); text-transform: uppercase; letter-spacing: 0.08em; flex-shrink: 0; }
.game-options { display: flex; align-items: center; gap: 6px; flex-wrap: wrap; margin-left: auto; }
.opt-group { display: flex; align-items: center; gap: 4px; }
.opt-sep { width: 1px; height: 16px; background: var(--border); margin: 0 4px; }
.opt-btn { font-family: 'JetBrains Mono', monospace; font-size: 11px; font-weight: 500; color: var(--muted); background: transparent; border: 1px solid transparent; border-radius: var(--r-xs); padding: 5px 10px; transition: all var(--tr); }
.opt-btn:hover { color: var(--text); background: var(--surface-2); }
.opt-btn.on { color: var(--accent); border-color: rgba(255,139,110,0.35); background: rgba(255,139,110,0.07); }
.rush-badge-label { font-family: 'JetBrains Mono', monospace; font-size: 11px; color: var(--muted-2); letter-spacing: 0.08em; margin-left: auto; text-transform: uppercase; }

.game-inner { display: flex; flex-direction: column; gap: 16px; }
.stats-row { display: flex; align-items: flex-end; gap: 16px; margin-bottom: 8px; flex-wrap: wrap; }
.stat-block { text-align: left; min-width: 80px; }
.stat-num { position: relative; font-family: 'JetBrains Mono', monospace; font-size: 40px; font-weight: 400; line-height: 1; color: transparent; letter-spacing: -0.08em; transition: color var(--tr-med); min-width: 64px; }
.stat-block--primary .stat-num { font-size: 44px; }
.stat-num.accent { color: var(--accent); }
.stat-num.good { color: var(--teal); }
.stat-num.faded { opacity: 0.3; }
.stat-num.small { font-size: 28px; min-width: unset; padding-bottom: 4px; }
.stat-lbl { font-size: 10px; font-weight: 600; letter-spacing: 0.08em; text-transform: uppercase; color: rgba(125,118,153,0.5); margin-top: 4px; }
.stat-spacer { flex: 1; }

.timer-block { text-align: right; min-width: 80px; }
.timer-num { position: relative; font-family: 'JetBrains Mono', monospace; font-size: 44px; font-weight: 300; line-height: 1; color: transparent; letter-spacing: -0.08em; transition: color var(--tr-med); }
.timer-num--warn { color: var(--amber); }
.timer-num--urgent { color: var(--accent); }
.timer-track { width: 80px; height: 3px; background: var(--surface-3); border-radius: 0; overflow: hidden; margin-top: 8px; }
.timer-fill { height: 100%; background: var(--accent); border-radius: 0; transition: width 1s linear; }

.typing-box { background: #231b33; border: 1px solid var(--border-2); border-radius: var(--r); padding: 24px 32px 24px; cursor: text; position: relative; overflow: hidden; box-shadow: inset 0 0 0 1px rgba(255,255,255,0.02); transition: border-color var(--tr-fast), box-shadow var(--tr-fast), background-color var(--tr-med); }
.typing-box:focus-within { border-color: var(--accent); box-shadow: inset 0 0 0 1px rgba(255,139,110,0.25); }
.idle-overlay {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'JetBrains Mono', monospace;
  font-size: 12px;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: var(--muted-2);
  background: linear-gradient(to bottom, rgba(16,14,24,0.92), rgba(16,14,24,0.96));
  pointer-events: none;
  z-index: 2;
}

.words-display { font-family: 'JetBrains Mono', monospace; font-size: 20px; line-height: 1.85; overflow: hidden; height: calc(20px * 1.85 * 3); user-select: none; }
.words-inner { transition: transform var(--tr-med); }
.tc { position: relative; color: var(--muted); }
.tc.ok { color: var(--correct); }
.tc.err { color: var(--wrong); text-decoration: underline; text-underline-offset: 3px; text-decoration-style: wavy; text-decoration-color: rgba(248,113,150,0.5); }
.tc.cur::after { content: ''; position: absolute; left: 0; right: 0; bottom: 0; height: 2px; background: var(--cursor); border-radius: 0; animation: cursorFade 1s ease-in-out infinite; opacity: 0.1; }
.tc.ghost-cur::after { content: ''; position: absolute; left: 0; right: 0; bottom: 0; height: 2px; background: var(--indigo); border-radius: 0; opacity: 0.4; }
@keyframes cursorFade { 0%,100%{opacity:0.1} 50%{opacity:1} }

.hidden-input { position: absolute; opacity: 0; pointer-events: none; width: 1px; height: 1px; }
.progress-line { height: 2px; background: var(--surface-2); border-radius: 0; overflow: hidden; margin-top: 0; margin-bottom: 0; }
.progress-fill { height: 100%; background: var(--accent); border-radius: 0; width: 0%; transition: width 100ms linear; }
.type-hint { text-align: center; font-family: 'JetBrains Mono', monospace; font-size: 10px; letter-spacing: 0.08em; color: rgba(125,118,153,0.6); margin-top: 8px; text-transform: uppercase; }

/* Stats placeholders before run */
.game-inner .stat-num::before,
.game-inner .timer-num::before {
  content: '—';
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  color: rgba(125,118,153,0.7);
}
.game-inner--running .stat-num,
.game-inner--running .timer-num {
  color: var(--text);
}
.game-inner--running .stat-num::before,
.game-inner--running .timer-num::before {
  content: none;
}

.toast { position: fixed; bottom: 28px; left: 50%; transform: translateX(-50%) translateY(80px); background: var(--surface-2); border: 1px solid var(--border-2); border-radius: 20px; padding: 10px 20px; font-size: 13px; font-weight: 500; color: var(--text); transition: transform 0.3s cubic-bezier(0.16,1,0.3,1); z-index: 999; pointer-events: none; white-space: nowrap; }
.toast.show { transform: translateX(-50%) translateY(0); }

/* Word Rush minimal layout */
.rush-inner {
  align-items: center;
  justify-content: center;
  gap: 24px;
}
.rush-top {
  display: flex;
  gap: 24px;
  justify-content: center;
}
.rush-counter {
  text-align: center;
  min-width: 72px;
}
.rush-label {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: rgba(125,118,153,0.7);
  margin-bottom: 4px;
}
.rush-value {
  font-family: 'JetBrains Mono', monospace;
  font-size: 20px;
  color: var(--text);
}
.rush-counter-time .rush-value {
  color: var(--accent);
}
.rush-arena {
  display: flex;
  justify-content: center;
  align-items: center;
}
.ring-wrap {
  position: relative;
  width: 200px;
  height: 200px;
}
.ring-svg {
  width: 100%;
  height: 100%;
  transform: rotate(-90deg);
}
.ring-track {
  stroke: var(--surface-3);
  stroke-width: 6;
}
.ring-progress {
  stroke-width: 6;
  stroke-linecap: round;
  stroke-dasharray: 326.73;
  transition: stroke 150ms linear;
}
.ring-center {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 8px;
}
.rush-word {
  display: flex;
  gap: 4px;
}
.rw {
  font-family: 'JetBrains Mono', monospace;
  font-size: 22px;
}
.rw.pending { color: var(--muted); }
.rw.ok { color: var(--correct); }
.rw.err { color: var(--wrong); }
.rush-limit {
  font-family: 'JetBrains Mono', monospace;
  font-size: 11px;
  color: var(--muted-2);
}

/* Results layout */
.results-wrap {
  max-width: 640px;
  margin: 0 auto;
  padding: 32px 24px 64px;
  display: flex;
  flex-direction: column;
  gap: 24px;
}
.result-hero {
  display: flex;
  flex-direction: column;
  gap: 8px;
}
.result-game-label {
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--muted-2);
}
.result-main-num {
  font-family: 'JetBrains Mono', monospace;
  font-size: 56px;
  line-height: 1;
  color: var(--accent);
}
.result-main-unit {
  font-size: 14px;
  color: var(--muted);
}
.result-pb {
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--teal);
}
.result-stats-row {
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
}
.result-stat {
  min-width: 96px;
}
.result-stat-val {
  font-family: 'JetBrains Mono', monospace;
  font-size: 16px;
  color: var(--text);
}
.result-stat-lbl {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: rgba(125,118,153,0.7);
}
.result-chart-wrap {
  padding: 16px 16px 20px;
  border-radius: var(--r);
  background: var(--surface);
}
.result-actions {
  display: flex;
  align-items: center;
  gap: 16px;
}
.btn-primary {
  padding: 10px 20px;
  border-radius: 999px;
  background: var(--accent);
  color: #0f0d18;
  font-size: 13px;
  font-weight: 600;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  border: none;
  cursor: pointer;
  transition: background-color var(--tr-fast), transform var(--tr-fast);
}
.btn-primary:hover {
  background: #ff986f;
  transform: translateY(-1px);
}
.result-link {
  padding: 0;
  border: none;
  background: none;
  color: var(--muted);
  font-size: 12px;
  text-decoration: underline;
  text-underline-offset: 3px;
  cursor: pointer;
  transition: color var(--tr-fast);
}
.result-link:hover {
  color: var(--text);
}

@media (max-width: 768px) {
  .game-grid { grid-template-columns: repeat(2, 1fr); }
}

@media (max-width: 480px) {
  .game-grid { grid-template-columns: 1fr; }
  .stats-row { gap: 12px; }
  .stat-num { font-size: 34px; }
  .timer-num { font-size: 34px; }
  .words-display { font-size: 17px; height: calc(17px * 1.85 * 3); }
  .typing-box { padding: 20px; }
  .game-options { display: none; }
}

